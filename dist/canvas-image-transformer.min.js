const CanvasImageTransformer=function(){var a=function(c,d,e,b){return(c<<24)+(d<<16)+(e<<8)+b};return{colorToRGBA:function(a){return[255&a>>24,255&a>>16,255&a>>8,255&a]},rgbaToColor:a,imageToCanvas:function(a,b,c,d){d&&(a.width>a.height?c*=a.height/a.width:a.height>a.width&&(b*=a.width/a.height));var e=document.createElement("canvas");e.width=b,e.height=c;var f=e.getContext("2d");return f.drawImage(a,0,0,b,c),e},videoFrameToCanvas:function(a,b,c,d){d&&(a.videoWidth>a.videoHeight?c*=a.videoHeight/a.videoWidth:a.height>a.videoWidth&&(b*=a.videoWidth/a.videoHeight));var e=document.createElement("canvas");e.width=b,e.height=c;var f=e.getContext("2d");return f.drawImage(a,0,0,b,c),e},applyKernel:function(a){var b=a.getContext("2d"),c=b.getImageData(0,0,a.width,a.height);return b.putImageData(c,0,0),a},toGrayscale:function(a){for(var b,c=a.getContext("2d"),d=c.getImageData(0,0,a.width,a.height),e=0;e<d.data.length;e+=4)b=parseInt(255*(.2126*(d.data[e]/255)+.7152*(d.data[e+1]/255)+.0722*(d.data[e+2]/255))),d.data[e]=b,d.data[e+1]=b,d.data[e+2]=b;return c.putImageData(d,0,0),a},toBlackAndWhite:function(a){for(var b,c=a.getContext("2d"),d=c.getImageData(0,0,a.width,a.height),e=0;e<d.data.length;e+=4)b=.2126*(d.data[e]/255)+.7152*(d.data[e+1]/255)+.0722*(d.data[e+2]/255),.5>b?(d.data[e]=0,d.data[e+1]=0,d.data[e+2]=0,d.data[e+3]=255):(d.data[e]=255,d.data[e+1]=255,d.data[e+2]=255,d.data[e+3]=255);return c.putImageData(d,0,0),a},computeColorFrequencyMap:function(b){for(var c,d=new Map,e=b.getContext("2d"),f=e.getImageData(0,0,b.width,b.height),g=0;g<f.data.length;g+=4)c=a(f.data[g],f.data[g+1],f.data[g+2],f.data[g+3]),d.has(c)?d.set(c,d.get(c)+1):d.set(c,1);return d}}}();"undefined"!=typeof module&&module.exports&&(module.exports=CanvasImageTransformer);