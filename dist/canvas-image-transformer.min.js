const CanvasImageTransformer=function(){var t=function(t,a,e,d){return(t<<24)+(a<<16)+(e<<8)+d};return{colorToRGBA:function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},rgbaToColor:t,imageToCanvas:function(t,a,e,d){d&&(t.width>t.height?e*=t.height/t.width:t.height>t.width&&(a*=t.width/t.height));var n=document.createElement("canvas");return n.width=a,n.height=e,n.getContext("2d").drawImage(t,0,0,a,e),n},videoFrameToCanvas:function(t,a,e,d){d&&(t.videoWidth>t.videoHeight?e*=t.videoHeight/t.videoWidth:t.height>t.videoWidth&&(a*=t.videoWidth/t.videoHeight));var n=document.createElement("canvas");return n.width=a,n.height=e,n.getContext("2d").drawImage(t,0,0,a,e),n},toGrayscale:function(t){for(var a=t.getContext("2d"),e=a.getImageData(0,0,t.width,t.height),d=0;d<e.data.length;d+=4){var n=parseInt(255*(e.data[d]/255*.2126+e.data[d+1]/255*.7152+e.data[d+2]/255*.0722));e.data[d]=n,e.data[d+1]=n,e.data[d+2]=n}return a.putImageData(e,0,0),t},toBlackAndWhite:function(t){for(var a=t.getContext("2d"),e=a.getImageData(0,0,t.width,t.height),d=0;d<e.data.length;d+=4){e.data[d]/255*.2126+e.data[d+1]/255*.7152+e.data[d+2]/255*.0722<.5?(e.data[d]=0,e.data[d+1]=0,e.data[d+2]=0,e.data[d+3]=255):(e.data[d]=255,e.data[d+1]=255,e.data[d+2]=255,e.data[d+3]=255)}return a.putImageData(e,0,0),t},computeColorFrequencyMap:function(a){for(var e=new Map,d=a.getContext("2d").getImageData(0,0,a.width,a.height),n=0;n<d.data.length;n+=4){var o=t(d.data[n],d.data[n+1],d.data[n+2],d.data[n+3]);e.has(o)?e.set(o,e.get(o)+1):e.set(o,1)}return e}}}();"undefined"!=typeof module&&module.exports&&(module.exports=CanvasImageTransformer);