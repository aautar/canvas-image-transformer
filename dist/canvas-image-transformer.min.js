window.CanvasImageTransformer=function(){return{imageToCanvas:function(a,t,e,d){d&&(a.width>a.height?e*=a.height/a.width:a.height>a.width&&(t*=a.width/a.height));var n=document.createElement("canvas");n.width=t,n.height=e;var h=n.getContext("2d");return h.drawImage(a,0,0,t,e),n},toGrayscale:function(a){for(var t=a.getContext("2d"),e=t.getImageData(0,0,a.width,a.height),d=0;d<e.data.length;d+=4){var n=parseInt(255*(.2126*(e.data[d]/255)+.7152*(e.data[d+1]/255)+.0722*(e.data[d+2]/255)));e.data[d]=n,e.data[d+1]=n,e.data[d+2]=n,e.data[d+3]=255}return t.putImageData(e,0,0),a},toBlackAndWhite:function(a){for(var t=a.getContext("2d"),e=t.getImageData(0,0,a.width,a.height),d=0;d<e.data.length;d+=4){var n=.2126*(e.data[d]/255)+.7152*(e.data[d+1]/255)+.0722*(e.data[d+2]/255);.5>n?(e.data[d]=0,e.data[d+1]=0,e.data[d+2]=0,e.data[d+3]=255):(e.data[d]=255,e.data[d+1]=255,e.data[d+2]=255,e.data[d+3]=255)}return t.putImageData(e,0,0),a}}}();